<!DOCTYPE html>
<html lang='en'>
  
<head>
    <meta charset='utf-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1, shrink-to-fit=no'>

    <title>Overview</title>

    <link rel='import' href='../Common/imports.html'>
</head>

<body>
    <link rel='import' href='../Common/navbar.html'>  

    <div class='container'>
        <h1>Transactions</h1>

        <div class='row'>
            <div class='col-6'>
                <button id='add-transaction-modal-button' class='btn btn-primary' type='button'>
                    Add Transaction
                </button>
            </div>
            <div class='col-6'>
                <button id='upload-modal-button' class='btn btn-primary' type='button'>
                    Upload Transactions
                </button>
            </div>
        </div>

        <table class='table table-striped table-hover table-responsive transaction-table' style="padding: 30px 0px">
            <thead>
                <tr>
                    <th>Description</th>
                    <th>Amount</th>
                    <th>Category</th>
                    <th>Account</th>
                    <th>Date</th>
                </tr>
            </thead>
            <tbody class='transactions'>
            </tbody>
        </table>
    </div>

    <script type='text/javascript'>
        $('#upload-modal-button').click(function() {
            // Get Partial
        });

        populateTransactions();

    function populateTransactions(callback) {
        $.get('http://localhost:5000/api/transaction', function(transactions) {
            $('.transactions').empty();
            $(transactions).each(function(index, transaction) {
                var transactionDate = new Date(Date.parse(transaction.TransactionDate));

                $('.transactions').append(
                    "<tr> \
                        <td>" + transaction.Description + "</td> \
                        <td class='currency-format'>$" + transaction.Amount.format(2) + "</td> \
                        <td>" + transaction.CategoryId + "</td> \
                        <td>" + transaction.AccountId + "</td> \
                        <td>" + (transactionDate.getMonth() + 1) + "/" + transactionDate.getDate() + "/" + transactionDate.getFullYear() + "</td> \
                    </tr>"
                );
            });
            if (callback) callback();
        });
    }

    </script>

</body>

</html>
            
<!DOCTYPE html>
<html lang='en'>
  
<head>
    <meta charset='utf-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1, shrink-to-fit=no'>

    <title>Overview</title>

    <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css'>
    <link rel='stylesheet' href='../Styles/app.css'>
</head>

<body>
    <nav class='navbar navbar-toggleable-md navbar-light bg-faded'>
        <button class='navbar-toggler navbar-toggler-right' type='button' data-toggle='collapse' data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <a class='navbar-brand' href='#'>
            <!-- Include img here -->
            Aloe
        </a>
        <div class='collapse navbar-collapse' id='navbar'>
            <div class='navbar-nav'>
                <a class='nav-item nav-link' href='overview.html'>Home</a>
                <a class='nav-item nav-link' href='settings.html'>Settings</a>
                <a class='nav-item nav-link active' href='#'>Transactions</a>
            </div>
        </div>
    </nav>  

    <div class='container'>
        <h1>Transactions</h1>

        <div class='row'>
            <div class='col-6'>
                <button id='add-transaction-modal-button' class='btn btn-primary' type='button'>
                    Add Transaction
                </button>
            </div>
            <div class='col-6'>
                <button id='upload-modal-button' class='btn btn-primary' type='button'>
                    Upload Transactions
                </button>
            </div>
        </div>

        <table class='table table-striped table-hover table-responsive transaction-table' style="padding: 30px 0px">
            <thead>
                <tr>
                    <th>Description</th>
                    <th>Amount</th>
                    <th>Category</th>
                    <th>Account</th>
                    <th>Date</th>
                </tr>
            </thead>
            <tbody class='transactions'>
            </tbody>
        </table>
    </div>
    
    <script type='text/javascript'>window.$ = window.jQuery = require('jquery');</script>
    <script src='https://code.jquery.com/jquery-3.1.1.min.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js'></script>
    <script src='https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js'></script>
    <script type='text/javascript' src='../Scripts/helpers.js'></script>

    <script type='text/javascript'>
        $('#upload-modal-button').click(function() {

        });

        populateTransactions();

    function populateTransactions(callback) {
        $.get('http://localhost:5000/api/transaction', function(transactions) {
            $('.transactions').empty();
            $(transactions).each(function(index, transaction) {
                var transactionDate = new Date(Date.parse(transaction.TransactionDate));

                $('.transactions').append(
                    "<tr> \
                        <td>" + transaction.Description + "</td> \
                        <td class='currency-format'>$" + transaction.Amount.format(2) + "</td> \
                        <td>" + transaction.CategoryId + "</td> \
                        <td>" + transaction.AccountId + "</td> \
                        <td>" + (transactionDate.getMonth() + 1) + "/" + transactionDate.getDate() + "/" + transactionDate.getFullYear() + "</td> \
                    </tr>"
                );
            });
            if (callback) callback();
        });
    }

    </script>

</body>

</html>
            